<!DOCTYPE html>
<html lang="ja">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>YOKO's Garden ğŸ¯</title>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>

    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>

        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

        }

        body {

            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;

            background: linear-gradient(135deg, #fff5f5 0%, #ffe4e1 50%, #ffd4c8 100%);

            min-height: 100vh;

            padding: 0;

            overflow-x: hidden;

            -webkit-tap-highlight-color: transparent;

        }

        #root {

            max-width: 480px;

            margin: 0 auto;

            min-height: 100vh;

            background: white;

            box-shadow: 0 0 40px rgba(255, 140, 0, 0.1);

        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */

        .header {

            background: linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%);

            color: white;

            padding: 20px;

            text-align: center;

            border-radius: 0 0 30px 30px;

            box-shadow: 0 4px 20px rgba(255, 140, 0, 0.3);

            position: relative;

        }

        .header h1 {

            font-size: 24px;

            margin-bottom: 10px;

            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);

        }

        .stats-container {

            display: flex;

            justify-content: space-around;

            margin-top: 15px;

            gap: 10px;

            padding-right: 120px;

        }

        .stat-box {

            background: rgba(255, 255, 255, 0.3);

            padding: 10px 15px;

            border-radius: 15px;

            backdrop-filter: blur(10px);

            flex: 1;

        }

        .stat-label {

            font-size: 11px;

            opacity: 0.9;

            margin-bottom: 3px;

        }

        .stat-value {

            font-size: 20px;

            font-weight: bold;

        }

        /* ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ãƒˆã‚°ãƒ« */
        .music-toggle {
            position: absolute;
            right: 12px;
            top: 12px;
            background: rgba(255,255,255,0.25);
            border: 0;
            color: #fff;
            padding: 8px 12px;
            border-radius: 16px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
        }
        .music-toggle:active { transform: translateY(1px); }

        /* è™ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ */

        .tiger-container {

            padding: 30px 20px;

            text-align: center;

            position: relative;

        }

        .tiger {

            font-size: 120px;

            animation: float 3s ease-in-out infinite;

            filter: drop-shadow(0 10px 20px rgba(255, 140, 0, 0.3));

            cursor: pointer;

            transition: transform 0.3s ease;

        }

        /* CSS-drawn Tiger - æ”¹è‰¯ç‰ˆ */
        .tiger-box {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #ffd4a3 0%, #ffe8c8 50%, #fff5e6 100%);
            border-radius: 50% 50% 45% 45% / 60% 60% 40% 40%;
            position: relative;
            display: inline-block;
            box-shadow: 0 8px 24px rgba(255, 180, 120, 0.3), inset 0 -4px 8px rgba(255, 200, 150, 0.3);
            animation: float 5s ease-in-out infinite;
            cursor: pointer;
            transition: transform 0.2s ease;
            overflow: visible;
        }
        
        /* ä¸¸ã„è€³ */
        .tiger-box::before,
        .tiger-box::after {
            content: "";
            position: absolute;
            top: -18px;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #ffd4a3 0%, #ffe8c8 100%);
            border-radius: 50% 50% 50% 0;
            box-shadow: inset 0 -3px 6px rgba(255, 200, 150, 0.4), 0 2px 4px rgba(255, 180, 120, 0.2);
            z-index: 1;
        }
        .tiger-box::before {
            left: 12px;
            transform: rotate(-25deg);
        }
        .tiger-box::after {
            right: 12px;
            transform: rotate(25deg);
        }
        
        /* æ·¡ã„ç¸æ¨¡æ§˜ */
        .tiger-box .stripes {
            position: absolute;
            inset: 0;
            background:
                linear-gradient(90deg, transparent 35%, rgba(255, 180, 120, 0.15) 40%, rgba(255, 180, 120, 0.15) 45%, transparent 50%) 0 28px/100% 6px no-repeat,
                linear-gradient(90deg, transparent 50%, rgba(255, 180, 120, 0.15) 52%, rgba(255, 180, 120, 0.15) 58%, transparent 60%) 0 42px/100% 6px no-repeat,
                linear-gradient(90deg, transparent 40%, rgba(255, 180, 120, 0.12) 45%, rgba(255, 180, 120, 0.12) 55%, transparent 60%) 0 56px/100% 5px no-repeat;
            pointer-events: none;
            border-radius: inherit;
        }
        
        /* é¡”ã®ãƒ‘ãƒ¼ãƒ„ */
        .tiger-box .face {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-top: 8px;
        }
        
        /* ç›® */
        .tiger-box .eyes {
            display: flex;
            gap: 20px;
            margin-bottom: 4px;
            position: relative;
            z-index: 2;
        }
        
        .tiger-box .eye {
            width: 18px;
            height: 18px;
            background: #2d2a26;
            border-radius: 50%;
            position: relative;
            box-shadow: 
                0 0 0 3px rgba(255, 255, 255, 0.6),
                0 0 0 6px rgba(255, 240, 200, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.2),
                inset -2px -2px 4px rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        /* ã‚­ãƒ©ã‚­ãƒ©åŠ¹æœï¼ˆç›®ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰ */
        .tiger-box .eye::before {
            content: "";
            position: absolute;
            top: 4px;
            left: 5px;
            width: 6px;
            height: 6px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.8);
            animation: sparkleEye 2s ease-in-out infinite;
        }
        
        @keyframes sparkleEye {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.8); }
        }
        
        /* é¼» */
        .tiger-box .nose {
            width: 16px;
            height: 12px;
            background: #2d2a26;
            border-radius: 50% 50% 60% 60% / 50% 50% 80% 80%;
            margin: 2px auto 0;
            position: relative;
            z-index: 2;
        }
        
        /* å£ */
        .tiger-box .mouth {
            width: 32px;
            height: 16px;
            border-bottom: 3px solid #2d2a26;
            border-radius: 0 0 32px 32px;
            margin: 4px auto 0;
            opacity: 0.8;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }
        
        /* ã²ã’ */
        .tiger-box .whiskers {
            width: 70px;
            height: 16px;
            position: relative;
            margin: 6px auto 0;
            z-index: 2;
        }
        
        .tiger-box .whiskers::before,
        .tiger-box .whiskers::after {
            content: "";
            position: absolute;
            top: 0;
            width: 100%;
            height: 2px;
            border-top: 1.5px solid rgba(45, 42, 38, 0.4);
        }
        
        .tiger-box .whiskers::before {
            transform: translateY(4px);
        }
        
        .tiger-box .whiskers::after {
            transform: translateY(10px);
            opacity: 0.6;
        }
        
        /* ãƒ”ãƒ³ã‚¯ã®ãƒãƒ¼ã‚¯ï¼ˆå¸¸æ™‚è¡¨ç¤ºï¼‰ */
        .tiger-box .cheek {
            position: absolute;
            top: 64px;
            width: 16px;
            height: 16px;
            background: radial-gradient(circle, #ffb3c1 0%, #ff9bb0 100%);
            border-radius: 50%;
            opacity: 0.6;
            box-shadow: 0 2px 4px rgba(255, 179, 193, 0.4);
        }
        
        .tiger-box .cheek.left {
            left: 20px;
        }
        
        .tiger-box .cheek.right {
            right: 20px;
        }
        
        /* è¡¨æƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³ */
        /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆmood-normalï¼‰ï¼šé€šå¸¸ã®ãƒ‹ã‚³ãƒ‹ã‚³é¡” */
        .tiger-box.mood-normal .mouth {
            opacity: 0.8;
            width: 32px;
        }
        
        /* é”æˆæ™‚ï¼ˆmood-happyï¼‰ï¼šå£ã‚’é–‹ã‘ã¦ç¬‘é¡”ã€ç›®ãŒã‚­ãƒ©ã‚­ãƒ© */
        .tiger-box.mood-happy .mouth {
            opacity: 1;
            width: 36px;
            height: 20px;
            border-bottom: 4px solid #2d2a26;
            border-radius: 0 0 36px 36px;
        }
        
        .tiger-box.mood-happy .eye::before {
            animation: sparkleEye 0.8s ease-in-out infinite;
        }
        
        /* ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ˆmood-starï¼‰ï¼šå‘¨ã‚Šã«æ˜Ÿã®ã‚ªãƒ¼ãƒ©ã€ç›®ãŒãƒãƒ¼ãƒˆ */
        .tiger-box.mood-star {
            box-shadow: 
                0 0 0 4px rgba(255, 220, 150, 0.5),
                0 0 20px rgba(255, 200, 100, 0.6),
                0 8px 24px rgba(255, 180, 120, 0.3);
            animation: float 5s ease-in-out infinite, starGlow 2s ease-in-out infinite;
        }
        
        .tiger-box.mood-star .eye {
            background: #ff6b9d;
            box-shadow: 
                0 0 0 3px rgba(255, 255, 255, 0.6),
                0 0 0 6px rgba(255, 200, 220, 0.4),
                0 0 12px rgba(255, 107, 157, 0.6),
                0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .tiger-box.mood-star .eye::before {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 8px rgba(255, 255, 255, 1);
        }
        
        @keyframes starGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }
        
        /* å¤œé…ã„ï¼ˆmood-sleepyï¼‰ï¼šçœ ãã†ãªç›®ã€Zzzè¡¨ç¤º */
        .tiger-box.mood-sleepy .eye {
            transform: scaleY(0.3);
            border-radius: 50% 50% 0 0;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.6), 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .tiger-box.mood-sleepy .eye::before {
            display: none;
        }
        
        .tiger-box.mood-sleepy .mouth {
            opacity: 0.5;
        }
        
        .tiger-box .zzz {
            position: absolute;
            top: -40px;
            right: -10px;
            font-size: 14px;
            color: #999;
            font-weight: bold;
            opacity: 0;
            pointer-events: none;
            z-index: 20;
        }
        
        .tiger-box.mood-sleepy .zzz {
            opacity: 0.7;
            animation: zzzFloat 2s ease-in-out infinite;
        }
        
        @keyframes zzzFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
            50% { transform: translateY(-8px) rotate(5deg); opacity: 1; }
        }
        
        /* å…¨é”æˆï¼ˆmood-partyï¼‰ï¼šç´™å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ã‚­ãƒ©ã‚­ãƒ©æœ€å¤§ */
        .tiger-box.mood-party {
            animation: float 5s ease-in-out infinite, partyGlow 1.5s ease-in-out infinite;
            box-shadow: 
                0 0 0 6px rgba(255, 220, 150, 0.6),
                0 0 30px rgba(255, 200, 100, 0.8),
                0 8px 24px rgba(255, 180, 120, 0.3);
        }
        
        .tiger-box.mood-party .eye::before {
            animation: sparkleEye 0.5s ease-in-out infinite;
            box-shadow: 0 0 12px rgba(255, 255, 255, 1);
        }
        
        @keyframes partyGlow {
            0%, 100% { filter: brightness(1) hue-rotate(0deg); }
            25% { filter: brightness(1.3) hue-rotate(10deg); }
            50% { filter: brightness(1.2) hue-rotate(-10deg); }
            75% { filter: brightness(1.3) hue-rotate(5deg); }
        }
        
        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        /* ç¿’æ…£é”æˆæ™‚ï¼šã´ã‚‡ã‚“ã´ã‚‡ã‚“è·³ã­ã‚‹ */
        .tiger-box.animate-bounce {
            animation: bounce 0.6s ease;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            25% { transform: translateY(-20px) scale(1.05); }
            50% { transform: translateY(-10px) scale(1.02); }
            75% { transform: translateY(-15px) scale(1.03); }
        }
        
        /* ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ™‚ï¼š360åº¦å›è»¢ã—ã¦ã‚­ãƒ©ã‚­ãƒ© */
        .tiger-box.animate-spin {
            animation: spinCelebrate 1s ease;
        }
        
        @keyframes spinCelebrate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.15); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        /* ã‚¿ãƒƒãƒ—æ™‚ï¼šã¡ã‚‡ã£ã¨ç¸®ã‚“ã§ã¾ãŸæˆ»ã‚‹ */
        .tiger-box:active {
            transform: scale(0.92);
        }
        
        /* è£…é£¾ã‚¢ã‚¤ãƒ†ãƒ  */
        /* ç‹å† ï¼šé ­ã®ä¸Šã«CSSã§æç”»ï¼ˆå¤§ããã€é‡‘è‰²ï¼‰ */
        .tiger-box .crown {
            position: absolute;
            top: -28px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 30px;
            z-index: 10;
        }
        
        .tiger-box .crown::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            clip-path: polygon(20% 100%, 30% 0%, 50% 40%, 70% 0%, 80% 100%);
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.5), inset 0 1px 2px rgba(255, 255, 255, 0.6);
        }
        
        .tiger-box .crown::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            border-radius: 0 0 4px 4px;
        }
        
        /* ã‚µãƒ³ã‚°ãƒ©ã‚¹ï¼šç›®ã®ä½ç½®ã«é‡ã­ã¦è¡¨ç¤º */
        .tiger-box .sunglasses {
            position: absolute;
            top: 28px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 24px;
            z-index: 5;
        }
        
        .tiger-box .sunglasses::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 28px;
            height: 24px;
            background: linear-gradient(180deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 50% 50% 40% 40% / 60% 60% 30% 30%;
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.5),
                0 0 0 2px #333,
                0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .tiger-box .sunglasses::after {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 28px;
            height: 24px;
            background: linear-gradient(180deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 50% 50% 40% 40% / 60% 60% 30% 30%;
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.5),
                0 0 0 2px #333,
                0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .tiger-box .sunglasses-bridge {
            position: absolute;
            top: 38px;
            left: 50%;
            transform: translateX(-50%);
            width: 14px;
            height: 2px;
            background: #333;
            border-radius: 1px;
            z-index: 6;
        }
        
        /* ãƒªãƒœãƒ³ï¼šå³è€³ã®æ¨ª */
        .tiger-box .ribbon {
            position: absolute;
            top: -12px;
            right: 8px;
            width: 20px;
            height: 24px;
            z-index: 8;
        }
        
        .tiger-box .ribbon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 20px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            clip-path: polygon(50% 0%, 100% 30%, 100% 100%, 0% 100%, 0% 30%);
            box-shadow: 0 2px 6px rgba(255, 107, 157, 0.4);
        }
        
        .tiger-box .ribbon::after {
            content: "";
            position: absolute;
            top: 18px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 8px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            border-radius: 0 0 6px 6px;
        }
        
        /* èŠ±å† ï¼šé ­ã®å‘¨ã‚Šã«ãã‚‹ã£ã¨ */
        .tiger-box .flower-crown {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 40px;
            z-index: 7;
        }
        
        .tiger-box .flower-crown::before,
        .tiger-box .flower-crown::after {
            content: "";
            position: absolute;
            width: 16px;
            height: 16px;
            background: radial-gradient(circle, #ffb3d9 0%, #ff8fab 100%);
            border-radius: 50% 50% 50% 0;
            box-shadow: 0 2px 4px rgba(255, 179, 217, 0.4);
        }
        
        .tiger-box .flower-crown::before {
            top: 12px;
            left: 20px;
            transform: rotate(-20deg);
        }
        
        .tiger-box .flower-crown::after {
            top: 12px;
            right: 20px;
            transform: rotate(20deg);
        }
        
        /* ç´™å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆmood-partyç”¨ï¼‰ã¯JavaScriptã§å‹•çš„ã«è¿½åŠ  */
        
        /* æ˜Ÿã®ã‚ªãƒ¼ãƒ©ï¼ˆmood-starç”¨ï¼‰ */
        .tiger-box.mood-star .star-aura {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 160px;
            height: 160px;
            pointer-events: none;
            z-index: -1;
        }
        
        .tiger-box.mood-star .star-aura::before,
        .tiger-box.mood-star .star-aura::after {
            content: "â˜…";
            position: absolute;
            font-size: 20px;
            color: #ffd700;
            opacity: 0.6;
            animation: starRotate 3s linear infinite;
        }
        
        .tiger-box.mood-star .star-aura::before {
            top: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .tiger-box.mood-star .star-aura::after {
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        
        @keyframes starRotate {
            0% { transform: translateX(-50%) rotate(0deg); }
            100% { transform: translateX(-50%) rotate(360deg); }
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 480px) {
            .tiger-box {
                width: 100px;
                height: 100px;
            }
            
            .tiger-box .eye {
                width: 16px;
                height: 16px;
            }
            
            .tiger-box .crown {
                width: 42px;
                height: 26px;
                top: -24px;
            }
        }

        .tiger:active {

            transform: scale(0.95);

        }

        .tiger.celebrating {

            animation: celebrate 0.5s ease;

        }

        @keyframes float {

            0%, 100% { transform: translateY(0px); }

            50% { transform: translateY(-10px); }

        }

        @keyframes celebrate {

            0%, 100% { transform: scale(1) rotate(0deg); }

            25% { transform: scale(1.2) rotate(-10deg); }

            75% { transform: scale(1.2) rotate(10deg); }

        }

        .tiger-message {

            font-size: 16px;

            color: #ff6b6b;

            margin-top: 10px;

            min-height: 24px;

            font-weight: 500;

        }

        .level-badge {

            display: inline-block;

            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);

            color: #ff6b6b;

            padding: 8px 20px;

            border-radius: 20px;

            font-weight: bold;

            font-size: 14px;

            margin-top: 10px;

            box-shadow: 0 4px 10px rgba(255, 215, 0, 0.4);

        }

        /* çµŒé¨“å€¤ãƒãƒ¼ */

        .exp-bar-container {

            margin: 20px;

            background: #ffe4e1;

            border-radius: 20px;

            height: 30px;

            overflow: hidden;

            position: relative;

            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);

        }

        .exp-bar {

            height: 100%;

            background: linear-gradient(90deg, #ff9a56 0%, #ff6b6b 100%);

            transition: width 0.5s ease;

            display: flex;

            align-items: center;

            justify-content: center;

            color: white;

            font-weight: bold;

            font-size: 12px;

        }

        /* ã‚¿ãƒ– */

        .tabs {

            display: flex;

            background: #fff5f5;

            border-bottom: 2px solid #ffe4e1;

        }

        .tab {

            flex: 1;

            padding: 15px;

            text-align: center;

            border: none;

            background: transparent;

            cursor: pointer;

            font-size: 14px;

            font-weight: 500;

            color: #999;

            transition: all 0.3s ease;

        }

        .tab.active {

            color: #ff6b6b;

            background: white;

            border-bottom: 3px solid #ff6b6b;

        }

        /* ç¿’æ…£ãƒªã‚¹ãƒˆ */

        .habits-list {

            padding: 20px;

        }

        .habit-card {

            background: white;

            border-radius: 20px;

            padding: 20px;

            margin-bottom: 15px;

            box-shadow: 0 4px 15px rgba(0,0,0,0.05);

            border: 2px solid #ffe4e1;

            transition: all 0.3s ease;

        }

        .habit-card.completed {

            background: linear-gradient(135deg, #fff5f5 0%, #ffe4e1 100%);

            border-color: #ff9a56;

        }

        .habit-header {

            display: flex;

            align-items: center;

            gap: 15px;

            margin-bottom: 10px;

        }

        .habit-icon {

            font-size: 32px;

            flex-shrink: 0;

        }

        .habit-info {

            flex: 1;

        }

        .habit-name {

            font-size: 16px;

            font-weight: bold;

            color: #333;

            margin-bottom: 5px;

        }

        .habit-frequency {

            font-size: 12px;

            color: #999;

        }

        .habit-footer {

            display: flex;

            justify-content: space-between;

            align-items: center;

            margin-top: 10px;

        }

        .habit-points {

            font-size: 14px;

            color: #ff9a56;

            font-weight: bold;

        }

        .check-button {

            background: linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%);

            color: white;

            border: none;

            padding: 10px 25px;

            border-radius: 20px;

            font-weight: bold;

            cursor: pointer;

            transition: all 0.3s ease;

            font-size: 14px;

            box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);

        }

        .check-button:active {

            transform: scale(0.95);

        }

        .check-button.completed {

            background: #ddd;

            color: #999;

            box-shadow: none;

        }

        /* ãƒãƒƒã‚¸ */

        .badges-grid {

            display: grid;

            grid-template-columns: repeat(2, 1fr);

            gap: 15px;

            padding: 20px;

        }

        .badge-card {

            background: white;

            border-radius: 20px;

            padding: 20px;

            text-align: center;

            box-shadow: 0 4px 15px rgba(0,0,0,0.05);

            border: 2px solid #ffe4e1;

        }

        .badge-card.unlocked {

            border-color: #ffd700;

            background: linear-gradient(135deg, #fffef0 0%, #fff9e6 100%);

        }

        .badge-icon {

            font-size: 48px;

            margin-bottom: 10px;

            filter: grayscale(100%);

            opacity: 0.3;

        }

        .badge-card.unlocked .badge-icon {

            filter: grayscale(0%);

            opacity: 1;

            animation: shine 2s ease infinite;

        }

        @keyframes shine {

            0%, 100% { transform: scale(1); }

            50% { transform: scale(1.1); }

        }

        .badge-name {

            font-size: 14px;

            font-weight: bold;

            color: #333;

            margin-bottom: 5px;

        }

        .badge-description {

            font-size: 11px;

            color: #999;

        }

        /* ã‚·ãƒ§ãƒƒãƒ— */

        .shop-grid {

            display: grid;

            grid-template-columns: repeat(2, 1fr);

            gap: 15px;

            padding: 20px;

        }

        .shop-item {

            background: white;

            border-radius: 20px;

            padding: 20px;

            text-align: center;

            box-shadow: 0 4px 15px rgba(0,0,0,0.05);

            border: 2px solid #ffe4e1;

            cursor: pointer;

            transition: all 0.3s ease;

        }

        .shop-item:active {

            transform: scale(0.95);

        }

        .shop-item.owned {

            border-color: #ff9a56;

            background: linear-gradient(135deg, #fff5f5 0%, #ffe4e1 100%);

        }

        .shop-icon {

            font-size: 48px;

            margin-bottom: 10px;

        }

        .shop-name {

            font-size: 14px;

            font-weight: bold;

            color: #333;

            margin-bottom: 5px;

        }

        .shop-price {

            font-size: 16px;

            color: #ff9a56;

            font-weight: bold;

        }

        /* ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */

        .sparkle {

            position: fixed;

            pointer-events: none;

            font-size: 24px;

            animation: sparkleFloat 1s ease-out forwards;

            z-index: 1000;

        }

        @keyframes sparkleFloat {

            0% { transform: translate(0, 0) scale(1); opacity: 1; }

            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }

        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */

        .footer {

            text-align: center;

            padding: 20px;

            color: #999;

            font-size: 12px;

        }

        /* ä»Šæ—¥ã®é€²æ— */

        .daily-progress {

            margin: 20px;

            padding: 20px;

            background: linear-gradient(135deg, #fff5f5 0%, #ffe4e1 100%);

            border-radius: 20px;

            text-align: center;

        }

        .daily-progress h3 {

            color: #ff6b6b;

            margin-bottom: 10px;

            font-size: 16px;

        }

        .progress-text {

            font-size: 24px;

            font-weight: bold;

            color: #ff9a56;

        }

        /* è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰ */
        .add-grid {
            display: grid;
            grid-template-columns: minmax(0,1.6fr) 60px 84px 96px 44px;
            gap: 8px;
            align-items: center;
            grid-template-areas:
                "name emoji points freq add";
        }
        .add-grid > * { min-width: 0; }
        .add-grid input, .add-grid select { width: 100%; }
        .add-grid .field-name { grid-area: name; }
        .add-grid .field-emoji { grid-area: emoji; }
        .add-grid .field-points { grid-area: points; }
        .add-grid .field-freq { grid-area: freq; }
        .add-grid .field-add { grid-area: add; }

        @media (max-width: 480px) {
            .add-grid {
                /* 2è¡Œæ§‹æˆ: 1è¡Œç›®=åå‰(å…¨å¹…), 2è¡Œç›®=çµµæ–‡å­—/ãƒã‚¤ãƒ³ãƒˆ/é »åº¦(åºƒã‚)/è¿½åŠ  */
                grid-template-columns: minmax(0,1fr) 64px 84px minmax(0,1fr) 44px;
                grid-template-areas:
                    "name name name name name"
                    "emoji points freq freq add";
            }
            .add-grid .field-add {
                justify-self: end;
            }
        }

    </style>

</head>

<body>

    <div id="root"></div>

    <script type="text/babel">

        const { useState, useEffect } = React;

        // æ™‚é–“å¸¯ã«å¿œã˜ãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        function getBaseMessageByTime() {
            const hour = new Date().getHours();
            if (hour >= 5 && hour < 11) return 'ãŠã¯ã‚ˆã†ï¼ä»Šæ—¥ã‚‚é ‘å¼µã‚ã†ï¼ğŸ¯';
            if (hour >= 11 && hour < 17) return 'ã“ã‚“ã«ã¡ã¯ï¼ã„ã„ãƒšãƒ¼ã‚¹ã§ã„ã“ã†ï¼ğŸ¯';
            if (hour >= 17 && hour < 21) return 'ã“ã‚“ã°ã‚“ã¯ï¼ã‚ã¨å°‘ã—ã€ã„ã‘ã‚‹ï¼ğŸ¯';
            return 'å¤œæ›´ã‹ã—æ³¨æ„ï¼ç„¡ç†ã›ãšã­ğŸ¯';
        }

        function getBaseFaceByTime() {
            const hour = new Date().getHours();
            if (hour >= 21 || hour < 5) return 'ğŸ˜´';
            if (hour >= 5 && hour < 11) return 'ğŸ¯';
            if (hour >= 11 && hour < 17) return 'ğŸ˜º';
            return 'ğŸ˜¼';
        }
        
        // æ™‚é–“å¸¯ã«å¿œã˜ãŸmoodã®è¨­å®š
        function getBaseMoodByTime() {
            const hour = new Date().getHours();
            if (hour >= 21 || hour < 5) return 'sleepy';
            return 'normal';
        }

        // Audio Manager (Web Audio)
        const audioManager = (() => {
            let ctx = null;
            let musicGain = null;
            let sfxGain = null;
            let musicTimer = null;
            let started = false;
            let musicOn = false;

            const ensure = () => {
                if (!ctx) {
                    ctx = new (window.AudioContext || window.webkitAudioContext)();
                    musicGain = ctx.createGain();
                    sfxGain = ctx.createGain();
                    musicGain.gain.value = 0.15;
                    sfxGain.gain.value = 0.5;
                    musicGain.connect(ctx.destination);
                    sfxGain.connect(ctx.destination);
                }
            };

            const env = (node, startTime, attack=0.01, decay=0.2) => {
                const g = ctx.createGain();
                node.connect(g);
                g.connect(sfxGain);
                g.gain.setValueAtTime(0, startTime);
                g.gain.linearRampToValueAtTime(1, startTime + attack);
                g.gain.exponentialRampToValueAtTime(0.001, startTime + attack + decay);
                return g;
            };

            const note = (freq, when, dur=0.2, type='sine', toMusic=false) => {
                const osc = ctx.createOscillator();
                const gainNode = ctx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, when);
                const target = toMusic ? musicGain : sfxGain;
                osc.connect(gainNode);
                gainNode.connect(target);
                gainNode.gain.setValueAtTime(0, when);
                gainNode.gain.linearRampToValueAtTime(toMusic ? 0.3 : 1, when + 0.02);
                gainNode.gain.exponentialRampToValueAtTime(0.001, when + dur);
                osc.start(when);
                osc.stop(when + dur + 0.05);
            };

            const playChime = () => {
                if (!ctx) return;
                const now = ctx.currentTime;
                // Simple major arpeggio C-E-G-C
                [523.25, 659.25, 783.99, 1046.5].forEach((f, i) => note(f, now + i*0.08, 0.18, 'triangle', false));
            };

            const startMusic = () => {
                if (!ctx) return;
                if (musicOn) return;
                musicOn = true;
                const pattern = [
                  392.00, 392.00, 440.00, 392.00, 523.25, 493.88, // cute line
                  392.00, 392.00, 440.00, 392.00, 587.33, 523.25  // variation
                ];
                const beat = 0.28;
                const loop = () => {
                    if (!musicOn) return;
                    let t = ctx.currentTime;
                    pattern.forEach((f, i) => note(f, t + i*beat, 0.22, 'sine', true));
                    musicTimer = setTimeout(loop, (pattern.length * beat) * 1000);
                };
                loop();
            };

            const stopMusic = () => {
                musicOn = false;
                if (musicTimer) { clearTimeout(musicTimer); musicTimer = null; }
            };

            return {
                init: async () => {
                    if (started) return;
                    ensure();
                    try { await ctx.resume(); } catch (e) {}
                    started = true;
                },
                playChime,
                startMusic,
                stopMusic,
                isMusicOn: () => musicOn
            };
        })();

        // åˆæœŸãƒ‡ãƒ¼ã‚¿

        const initialHabits = [

            { id: 1, name: 'æœãƒ¨ã‚¬', icon: 'ğŸ§˜â€â™€ï¸', points: 10, frequency: 'æ¯æ—¥', completed: false },

            { id: 2, name: 'ç­‹ãƒˆãƒ¬', icon: 'ğŸ’ª', points: 15, frequency: 'é€±3å›', completed: false },

            { id: 3, name: 'è‹±èª30åˆ†', icon: 'ğŸ“š', points: 20, frequency: 'æ¯æ—¥', completed: false },

            { id: 4, name: 'ã‚µãƒ—ãƒªé£²ã‚€', icon: 'ğŸ’Š', points: 5, frequency: 'æ¯æ—¥', completed: false }

        ];

        const badges = [

            { id: 1, name: '3æ—¥é€£ç¶š', icon: 'ğŸ”¥', description: '3æ—¥é€£ç¶šé”æˆ', requirement: 3 },

            { id: 2, name: '1é€±é–“', icon: 'â­', description: '7æ—¥é€£ç¶šé”æˆ', requirement: 7 },

            { id: 3, name: '1ãƒ¶æœˆ', icon: 'ğŸ’', description: '30æ—¥é€£ç¶šé”æˆ', requirement: 30 },

            { id: 4, name: '100å›é”æˆ', icon: 'ğŸ‘‘', description: 'ç´¯è¨ˆ100å›é”æˆ', requirement: 100 }

        ];

        const shopItems = [

            { id: 1, name: 'ç‹å† ', icon: 'ğŸ‘‘', price: 50 },

            { id: 2, name: 'ã‚µãƒ³ã‚°ãƒ©ã‚¹', icon: 'ğŸ•¶ï¸', price: 30 },

            { id: 3, name: 'ãƒªãƒœãƒ³', icon: 'ğŸ€', price: 40 },

            { id: 4, name: 'èŠ±å† ', icon: 'ğŸŒ¸', price: 60 }

        ];

        function App() {

            const [activeTab, setActiveTab] = useState('habits');

            const [habits, setHabits] = useState([]);

            const [level, setLevel] = useState(1);

            const [exp, setExp] = useState(0);

            const [coins, setCoins] = useState(0);

            const [streak, setStreak] = useState(0);

            const [totalCompleted, setTotalCompleted] = useState(0);

            const [unlockedBadges, setUnlockedBadges] = useState([]);

            const [ownedItems, setOwnedItems] = useState([]);

            const [tigerMessage, setTigerMessage] = useState(getBaseMessageByTime());

            const [celebrating, setCelebrating] = useState(false);
            const [tigerFace, setTigerFace] = useState(getBaseFaceByTime());
            
            // moodçŠ¶æ…‹ç®¡ç†
            const [tigerMood, setTigerMood] = useState('normal');
            const [tigerAnimation, setTigerAnimation] = useState('');

            const [musicEnabled, setMusicEnabled] = useState(false);
            // æ–°è¦ç¿’æ…£ãƒ•ã‚©ãƒ¼ãƒ 
            const [newName, setNewName] = useState('');
            const [newIcon, setNewIcon] = useState('ğŸ¯');
            const [newPoints, setNewPoints] = useState(10);
            const [newFreq, setNewFreq] = useState('æ¯æ—¥');

            // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿

            useEffect(() => {

                const saved = localStorage.getItem('yokosGarden');
                const today = new Date().toDateString(); // æ—¥ä»˜æ–‡å­—åˆ—ï¼ˆä¾‹: "Mon Nov 07 2024"ï¼‰
                const lastResetDate = localStorage.getItem('yg_lastResetDate');

                if (saved) {

                    const data = JSON.parse(saved);

                    // æ—¥ä»˜ãŒå¤‰ã‚ã£ã¦ã„ãŸã‚‰ç¿’æ…£ã®å®Œäº†çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
                    if (lastResetDate !== today) {
                        // ãƒªã‚»ãƒƒãƒˆå‰ã«æ˜¨æ—¥ã®å®Œäº†çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
                        const yesterdayCompleted = data.habits && data.habits.some(h => h.completed);
                        
                        // ç¿’æ…£ã®completedã‚’falseã«ãƒªã‚»ãƒƒãƒˆ
                        const resetHabits = (data.habits || initialHabits).map(h => ({
                            ...h,
                            completed: false
                        }));
                        setHabits(resetHabits);
                        
                        // é€£ç¶šæ—¥æ•°ã®æ›´æ–°ï¼ˆæ˜¨æ—¥ç¿’æ…£ã‚’å®Œäº†ã—ã¦ã„ãªã‹ã£ãŸå ´åˆã¯0ã«ãƒªã‚»ãƒƒãƒˆï¼‰
                        // æ˜¨æ—¥å®Œäº†ã—ã¦ã„ãŸå ´åˆã¯ã€ä»Šæ—¥ç¿’æ…£ã‚’å®Œäº†ã—ãŸæ™‚ç‚¹ã§é€£ç¶šæ—¥æ•°ãŒ+1ã•ã‚Œã‚‹
                        if (!yesterdayCompleted) {
                            setStreak(0);
                        } else {
                            // æ˜¨æ—¥å®Œäº†ã—ã¦ã„ãŸå ´åˆã¯ã€æ—¢å­˜ã®é€£ç¶šæ—¥æ•°ã‚’ä¿æŒ
                            // ä»Šæ—¥ç¿’æ…£ã‚’å®Œäº†ã—ãŸæ™‚ç‚¹ã§+1ã•ã‚Œã‚‹
                            setStreak(data.streak || 0);
                        }
                        
                        // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ä¿å­˜
                        localStorage.setItem('yg_lastResetDate', today);
                        // é€£ç¶šæ—¥æ•°æ›´æ–°æ—¥ã‚‚ãƒªã‚»ãƒƒãƒˆ
                        localStorage.removeItem('yg_lastStreakUpdateDate');
                    } else {
                        setHabits(data.habits || initialHabits);
                        setStreak(data.streak || 0);
                    }

                    setLevel(data.level || 1);

                    setExp(data.exp || 0);

                    setCoins(data.coins || 0);

                    setTotalCompleted(data.totalCompleted || 0);

                    setUnlockedBadges(data.unlockedBadges || []);

                    setOwnedItems(data.ownedItems || []);

                } else {

                    setHabits(initialHabits);
                    localStorage.setItem('yg_lastResetDate', today);

                }

                const pref = localStorage.getItem('yg_music');
                if (pref === 'on') setMusicEnabled(true);
                
                // åˆæœŸmoodè¨­å®š
                setTigerMood(getBaseMoodByTime());

            }, []);

            // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜

            useEffect(() => {

                const data = {

                    habits,

                    level,

                    exp,

                    coins,

                    streak,

                    totalCompleted,

                    unlockedBadges,

                    ownedItems

                };

                localStorage.setItem('yokosGarden', JSON.stringify(data));

            }, [habits, level, exp, coins, streak, totalCompleted, unlockedBadges, ownedItems]);

            // Music preference side-effect
            useEffect(() => {
                localStorage.setItem('yg_music', musicEnabled ? 'on' : 'off');
            }, [musicEnabled]);

            const expForNextLevel = level * 50;

            const expPercentage = (exp / expForNextLevel) * 100;

            const completedToday = habits.filter(h => h.completed).length;

            const totalHabits = habits.length;

            // ãƒŸãƒ¥ãƒ¼ã‚¸ãƒƒã‚¯ã®ãƒˆã‚°ãƒ«ï¼ˆåˆå›ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§åˆæœŸåŒ–ï¼‰
            const toggleMusic = async () => {
                await audioManager.init();
                if (audioManager.isMusicOn()) {
                    audioManager.stopMusic();
                    setMusicEnabled(false);
                } else {
                    audioManager.startMusic();
                    setMusicEnabled(true);
                }
            };

            // ç¿’æ…£è¿½åŠ 
            const addHabit = (e) => {
                e.preventDefault();
                const name = newName.trim();
                if (!name) return;
                const nextId = (habits.reduce((m, h) => Math.max(m, Number(h.id) || 0), 0) + 1) || 1;
                const created = {
                    id: nextId,
                    name,
                    icon: newIcon || 'ğŸ¯',
                    points: Math.max(1, Number(newPoints) || 1),
                    frequency: newFreq || 'æ¯æ—¥',
                    completed: false
                };
                setHabits([ ...habits, created ]);
                setNewName('');
                setNewIcon('ğŸ¯');
                setNewPoints(10);
                setNewFreq('æ¯æ—¥');
            };

            // ç¿’æ…£å‰Šé™¤
            const deleteHabit = (habitId) => {
                const target = habits.find(h => h.id === habitId);
                if (!target) return;
                if (!confirm(`ã€Œ${target.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) return;
                setHabits(habits.filter(h => h.id !== habitId));
            };

            // ç¿’æ…£å®Œäº†

            const completeHabit = async (habitId) => {

                const habit = habits.find(h => h.id === habitId);

                if (habit.completed) return;

                // ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

                createSparkles();

                // ã‚µã‚¦ãƒ³ãƒ‰
                await audioManager.init();
                audioManager.playChime();

                // ç¿’æ…£ã‚’å®Œäº†çŠ¶æ…‹ã«

                const newHabits = habits.map(h =>

                    h.id === habitId ? { ...h, completed: true } : h

                );

                setHabits(newHabits);

                // çµŒé¨“å€¤ã¨ã‚³ã‚¤ãƒ³è¿½åŠ 

                let newExp = exp + habit.points;

                let newCoins = coins + Math.floor(habit.points / 2);

                let newLevel = level;

                // ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ãƒã‚§ãƒƒã‚¯
                let leveledUp = false;
                while (newExp >= newLevel * 50) {

                    newExp -= newLevel * 50;

                    newLevel++;
                    leveledUp = true;

                    setTigerMessage('ğŸ‰ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼å¼·ããªã£ãŸã‚ˆï¼');
                    setTigerFace('ğŸ¤©');
                    
                    // ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ™‚ã®moodã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                    setTigerMood('star');
                    setTigerAnimation('animate-spin');
                    setTimeout(() => {
                        setTigerAnimation('');
                    }, 1000);

                    setTimeout(() => { 
                        setTigerMessage(getBaseMessageByTime()); 
                        setTigerFace(getBaseFaceByTime());
                        setTigerMood(getBaseMoodByTime());
                    }, 3000);

                }

                setExp(newExp);

                setCoins(newCoins);

                setLevel(newLevel);

                setTotalCompleted(totalCompleted + 1);

                // é€£ç¶šæ—¥æ•°ã®æ›´æ–°ï¼ˆä»Šæ—¥åˆã‚ã¦ç¿’æ…£ã‚’å®Œäº†ã—ãŸã¨ãï¼‰
                const today = new Date().toDateString();
                const lastStreakUpdateDate = localStorage.getItem('yg_lastStreakUpdateDate');
                
                let newStreak = streak;
                // ä»Šæ—¥åˆã‚ã¦ç¿’æ…£ã‚’å®Œäº†ã—ãŸå ´åˆã€é€£ç¶šæ—¥æ•°ã‚’+1
                if (lastStreakUpdateDate !== today) {
                    newStreak = streak + 1;
                    setStreak(newStreak);
                    localStorage.setItem('yg_lastStreakUpdateDate', today);
                }

                // è™ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
                const newCompletedToday = completedToday + 1;
                const allCompleted = newCompletedToday === totalHabits;
                
                // å…¨é”æˆæ™‚ã®moodã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                if (allCompleted) {
                    setTigerMood('party');
                    setTigerMessage('ğŸŠ å…¨é”æˆï¼ç´ æ™´ã‚‰ã—ã„ï¼ğŸŠ');
                } else if (!leveledUp) {
                    // ç¿’æ…£é”æˆæ™‚ï¼ˆãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ãªã—ï¼‰
                    setTigerMood('happy');
                    setTigerAnimation('animate-bounce');
                    setTimeout(() => {
                        setTigerAnimation('');
                    }, 600);
                }

                setCelebrating(true);

                setTimeout(() => setCelebrating(false), 500);

                const messages = [

                    'ã‚„ã£ãŸãƒ¼ï¼å¬‰ã—ã„ï¼ğŸ¯',

                    'ã™ã”ã„ï¼ãã®èª¿å­ï¼âœ¨',

                    'å®Œç’§ï¼ä¸€ç·’ã«é ‘å¼µã‚ã†ï¼ğŸ’ª',

                    'ã•ã™ãŒYOKOã•ã‚“ï¼ğŸ”¥',

                    'é™ç•Œçªç ´ã ï¼ğŸŒŸ'

                ];

                if (!allCompleted && !leveledUp) {
                    setTigerMessage(messages[Math.floor(Math.random() * messages.length)]);
                }
                setTigerFace('ğŸ˜¸');

                setTimeout(() => { 
                    setTigerMessage(getBaseMessageByTime()); 
                    setTigerFace(getBaseFaceByTime());
                    setTigerMood(getBaseMoodByTime());
                }, 3000);

                // ãƒãƒƒã‚¸ãƒã‚§ãƒƒã‚¯ï¼ˆæ›´æ–°å¾Œã®é€£ç¶šæ—¥æ•°ã‚’ä½¿ç”¨ï¼‰
                checkBadges(newStreak, totalCompleted + 1);

            };

            // ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

            const createSparkles = () => {

                for (let i = 0; i < 10; i++) {

                    setTimeout(() => {

                        const sparkle = document.createElement('div');

                        sparkle.className = 'sparkle';

                        sparkle.textContent = ['âœ¨', 'â­', 'ğŸ’«', 'ğŸŒŸ'][Math.floor(Math.random() * 4)];

                        sparkle.style.left = `${Math.random() * window.innerWidth}px`;

                        sparkle.style.top = `${Math.random() * window.innerHeight}px`;

                        sparkle.style.setProperty('--tx', `${(Math.random() - 0.5) * 100}px`);

                        sparkle.style.setProperty('--ty', `${-50 - Math.random() * 50}px`);

                        document.body.appendChild(sparkle);

                        setTimeout(() => sparkle.remove(), 1000);

                    }, i * 100);

                }

            };

            // ãƒãƒƒã‚¸ãƒã‚§ãƒƒã‚¯

            const checkBadges = (currentStreak, currentTotal) => {

                badges.forEach(badge => {

                    if (!unlockedBadges.includes(badge.id)) {

                        if ((badge.id <= 3 && currentStreak >= badge.requirement) ||

                            (badge.id === 4 && currentTotal >= badge.requirement)) {

                            setUnlockedBadges([...unlockedBadges, badge.id]);

                            setTigerMessage(`ğŸ‰ ãƒãƒƒã‚¸ç²å¾—ï¼ã€Œ${badge.name}ã€ï¼`);

                        }

                    }

                });

            };

            // ã‚¢ã‚¤ãƒ†ãƒ è³¼å…¥

            const buyItem = (item) => {

                if (ownedItems.includes(item.id)) {

                    setTigerMessage('ã‚‚ã†æŒã£ã¦ã‚‹ã‚ˆï¼');

                    return;

                }

                if (coins >= item.price) {

                    setCoins(coins - item.price);

                    setOwnedItems([...ownedItems, item.id]);

                    setTigerMessage(`âœ¨ ${item.name}ã‚’æ‰‹ã«å…¥ã‚ŒãŸï¼`);
                    setTigerFace('ğŸ˜');

                    createSparkles();

                } else {

                    setTigerMessage('ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šãªã„ã‚ˆ...é ‘å¼µã‚ã†ï¼');

                }

                setTimeout(() => { setTigerMessage(getBaseMessageByTime()); setTigerFace(getBaseFaceByTime()); }, 3000);

            };

            // æ‰‹å‹•ãƒªã‚»ãƒƒãƒˆï¼ˆç¿’æ…£ã®å®Œäº†çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆï¼‰
            const resetDailyHabits = () => {
                if (!confirm('ä»Šæ—¥ã®ç¿’æ…£ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ\nï¼ˆå®Œäº†çŠ¶æ…‹ã®ã¿ãƒªã‚»ãƒƒãƒˆã•ã‚Œã€ãƒ¬ãƒ™ãƒ«ã‚„ã‚³ã‚¤ãƒ³ã€é€£ç¶šæ—¥æ•°ã¯ä¿æŒã•ã‚Œã¾ã™ï¼‰')) {
                    return;
                }
                
                // ç¾åœ¨ã®é€£ç¶šæ—¥æ•°ã‚’ä¿å­˜ï¼ˆæ‰‹å‹•ãƒªã‚»ãƒƒãƒˆã§ã¯é€£ç¶šæ—¥æ•°ã‚’ä¿æŒï¼‰
                const currentStreak = streak;
                
                const resetHabits = habits.map(h => ({
                    ...h,
                    completed: false
                }));
                setHabits(resetHabits);
                
                // é€£ç¶šæ—¥æ•°ã‚’æ˜ç¤ºçš„ã«ä¿æŒï¼ˆå¤‰æ›´ã—ãªã„ï¼‰
                setStreak(currentStreak);
                
                // ä»Šæ—¥ã®æ—¥ä»˜ã‚’æ›´æ–°ï¼ˆè‡ªå‹•ãƒªã‚»ãƒƒãƒˆã‚’é˜²ããŸã‚ï¼‰
                const today = new Date().toDateString();
                localStorage.setItem('yg_lastResetDate', today);
                
                setTigerMessage('ãƒªã‚»ãƒƒãƒˆå®Œäº†ï¼ä»Šæ—¥ã‚‚é ‘å¼µã‚ã†ï¼ğŸ¯');
                setTigerFace('ğŸ˜º');
                setTimeout(() => { setTigerMessage(getBaseMessageByTime()); setTigerFace(getBaseFaceByTime()); }, 3000);
            };

            return (

                <div>

                    {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}

                    <div className="header">

                        <h1>ğŸ¯ YOKO's Garden</h1>

                        <div style={{ position: 'absolute', right: '12px', top: '12px', display: 'flex', flexDirection: 'column', gap: '6px', zIndex: 10 }}>
                            <button className="music-toggle" onClick={toggleMusic} style={{ position: 'static' }}>
                                {musicEnabled ? 'â™ª éŸ³æ¥½ON' : 'â™ª éŸ³æ¥½OFF'}
                            </button>
                            <button 
                                className="music-toggle" 
                                onClick={resetDailyHabits}
                                style={{ position: 'static', fontSize: '11px', padding: '6px 10px' }}
                            >
                                ğŸ”„ ãƒªã‚»ãƒƒãƒˆ
                            </button>
                        </div>

                        <div className="stats-container">

                            <div className="stat-box">

                                <div className="stat-label">ãƒ¬ãƒ™ãƒ«</div>

                                <div className="stat-value">{level}</div>

                            </div>

                            <div className="stat-box">

                                <div className="stat-label">ã‚³ã‚¤ãƒ³</div>

                                <div className="stat-value">{coins}</div>

                            </div>

                            <div className="stat-box">

                                <div className="stat-label">é€£ç¶š</div>

                                <div className="stat-value">{streak}æ—¥</div>

                            </div>

                        </div>

                    </div>

                    {/* è™ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ */}

                    <div className="tiger-container">

                        <div className={`tiger-box mood-${tigerMood} ${tigerAnimation}`}>

                            <div className="stripes"></div>
                            
                            <div className="face">
                                <div className="eyes">
                                    <div className="eye"></div>
                                    <div className="eye"></div>
                                </div>
                                <div className="nose"></div>
                                <div className="mouth"></div>
                                <div className="whiskers"></div>
                            </div>
                            
                            <div className="cheek left"></div>
                            <div className="cheek right"></div>
                            
                            {/* Zzzè¡¨ç¤ºï¼ˆmood-sleepyç”¨ï¼‰ */}
                            <div className="zzz">Zzz</div>
                            
                            {/* è£…é£¾ã‚¢ã‚¤ãƒ†ãƒ  */}
                            {ownedItems.includes(1) && <div className="crown"></div>}
                            {ownedItems.includes(2) && (
                                <>
                                    <div className="sunglasses"></div>
                                    <div className="sunglasses-bridge"></div>
                                </>
                            )}
                            {ownedItems.includes(3) && <div className="ribbon"></div>}
                            {ownedItems.includes(4) && <div className="flower-crown"></div>}
                            
                            {/* æ˜Ÿã®ã‚ªãƒ¼ãƒ©ï¼ˆmood-starç”¨ï¼‰ */}
                            {tigerMood === 'star' && <div className="star-aura"></div>}

                        </div>

                        <div className="tiger-message">{tigerMessage}</div>

                        <div className="level-badge">Lv.{level} ã‚¿ã‚¤ã‚¬ãƒ¼æˆ¦å£«</div>

                    </div>

                    {/* çµŒé¨“å€¤ãƒãƒ¼ */}

                    <div className="exp-bar-container">

                        <div className="exp-bar" style={{ width: `${expPercentage}%` }}>

                            {exp} / {expForNextLevel} EXP

                        </div>

                    </div>

                    {/* ä»Šæ—¥ã®é€²æ— */}

                    {activeTab === 'habits' && (

                        <div className="daily-progress">

                            <h3>ä»Šæ—¥ã®é€²æ—</h3>

                            <div className="progress-text">{completedToday} / {totalHabits}</div>

                        </div>

                    )}

                    {/* ã‚¿ãƒ– */}

                    <div className="tabs">

                        <button className={`tab ${activeTab === 'habits' ? 'active' : ''}`} onClick={() => setActiveTab('habits')}>

                            ç¿’æ…£

                        </button>

                        <button className={`tab ${activeTab === 'badges' ? 'active' : ''}`} onClick={() => setActiveTab('badges')}>

                            ãƒãƒƒã‚¸

                        </button>

                        <button className={`tab ${activeTab === 'shop' ? 'active' : ''}`} onClick={() => setActiveTab('shop')}>

                            ã‚·ãƒ§ãƒƒãƒ—

                        </button>

                    </div>

                    {/* ç¿’æ…£ã‚¿ãƒ– */}

                    {activeTab === 'habits' && (

                        <div className="habits-list">

                            {/* è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  */}
                            <form onSubmit={addHabit} style={{
                                background: '#fff5f5',
                                border: '2px solid #ffe4e1',
                                borderRadius: 16,
                                padding: 16,
                                marginBottom: 16
                            }}>
                                <div className="add-grid">
                                    <input
                                        type="text"
                                        placeholder="ç¿’æ…£åï¼ˆä¾‹ï¼šæœãƒ¨ã‚¬ï¼‰"
                                        value={newName}
                                        onChange={e => setNewName(e.target.value)}
                                        className="field-name"
                                        style={{ height: 40, padding: '0 12px', borderRadius: 12, border: '2px solid #ffe4e1' }}
                                    />
                                    <input
                                        type="text"
                                        placeholder="çµµæ–‡å­—"
                                        value={newIcon}
                                        maxLength={2}
                                        onChange={e => setNewIcon(e.target.value)}
                                        className="field-emoji"
                                        style={{ height: 40, padding: '0 12px', borderRadius: 12, border: '2px solid #ffe4e1', textAlign: 'center' }}
                                    />
                                    <input
                                        type="number"
                                        min={1}
                                        max={100}
                                        value={newPoints}
                                        onChange={e => setNewPoints(e.target.value)}
                                        className="field-points"
                                        style={{ height: 40, padding: '0 12px', borderRadius: 12, border: '2px solid #ffe4e1' }}
                                    />
                                    <select
                                        value={newFreq}
                                        onChange={e => setNewFreq(e.target.value)}
                                        className="field-freq"
                                        style={{ height: 40, padding: '0 12px', borderRadius: 12, border: '2px solid #ffe4e1', background: 'white' }}
                                    >
                                        <option>æ¯æ—¥</option>
                                        <option>é€±3å›</option>
                                        <option>é€±5å›</option>
                                        <option>å¹³æ—¥</option>
                                    </select>
                                    <button
                                        type="submit"
                                        aria-label="ç¿’æ…£ã‚’è¿½åŠ "
                                        title="è¿½åŠ "
                                        className="field-add"
                                        style={{
                                            width: 40,
                                            height: 40,
                                            borderRadius: 20,
                                            border: 'none',
                                            background: 'linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%)',
                                            color: '#fff',
                                            fontWeight: 700,
                                            boxShadow: '0 4px 10px rgba(255, 107, 107, 0.3)',
                                            cursor: 'pointer',
                                            display: 'grid',
                                            placeItems: 'center'
                                        }}
                                    >
                                        ï¼‹
                                    </button>
                                </div>
                            </form>

                            {habits.map(habit => (

                                <div key={habit.id} className={`habit-card ${habit.completed ? 'completed' : ''}`}>

                                    <div className="habit-header">

                                        <div className="habit-icon">{habit.icon}</div>

                                        <div className="habit-info">

                                            <div className="habit-name">{habit.name}</div>

                                            <div className="habit-frequency">{habit.frequency}</div>

                                        </div>

                                    </div>

                                    <div className="habit-footer">

                                        <div className="habit-points">+{habit.points} EXP</div>

                                        <button

                                            className={`check-button ${habit.completed ? 'completed' : ''}`}

                                            onClick={() => completeHabit(habit.id)}

                                            disabled={habit.completed}

                                        >

                                            {habit.completed ? 'âœ“ å®Œäº†' : 'é”æˆï¼'}

                                        </button>

                                        <button
                                            onClick={() => deleteHabit(habit.id)}
                                            className="check-button"
                                            style={{ background: '#ddd', color: '#666' }}
                                        >
                                            ğŸ—‘ï¸ å‰Šé™¤
                                        </button>

                                    </div>

                                </div>

                            ))}

                        </div>

                    )}

                    {/* ãƒãƒƒã‚¸ã‚¿ãƒ– */}

                    {activeTab === 'badges' && (

                        <div className="badges-grid">

                            {badges.map(badge => (

                                <div key={badge.id} className={`badge-card ${unlockedBadges.includes(badge.id) ? 'unlocked' : ''}`}>

                                    <div className="badge-icon">{badge.icon}</div>

                                    <div className="badge-name">{badge.name}</div>

                                    <div className="badge-description">{badge.description}</div>

                                </div>

                            ))}

                        </div>

                    )}

                    {/* ã‚·ãƒ§ãƒƒãƒ—ã‚¿ãƒ– */}

                    {activeTab === 'shop' && (

                        <div className="shop-grid">

                            {shopItems.map(item => (

                                <div

                                    key={item.id}

                                    className={`shop-item ${ownedItems.includes(item.id) ? 'owned' : ''}`}

                                    onClick={() => buyItem(item)}

                                >

                                    <div className="shop-icon">{item.icon}</div>

                                    <div className="shop-name">{item.name}</div>

                                    <div className="shop-price">

                                        {ownedItems.includes(item.id) ? 'æ‰€æŒä¸­' : `${item.price} ã‚³ã‚¤ãƒ³`}

                                    </div>

                                </div>

                            ))}

                        </div>

                    )}

                    {/* ãƒ•ãƒƒã‚¿ãƒ¼ */}

                    <div className="footer">

                        Push Your Limits! ğŸ¯âœ¨<br/>

                        é™ç•Œã‚’è¶Šãˆã‚‹ã€ä»²é–“ã¨å…±ã«ãã®å…ˆã¸

                    </div>

                </div>

            );

        }

        ReactDOM.render(<App />, document.getElementById('root'));

    </script>

</body>

</html>


